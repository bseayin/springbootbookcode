-- 投票表
CREATE TABLE tb_d_vote (
  ID int(11) NOT NULL AUTO_INCREMENT,
  TITLE varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT '标题',
  DEADLINETIME date DEFAULT NULL COMMENT '截止日期',
  ISALL tinyint(4) DEFAULT NULL COMMENT '是否ALL，0：否，1：@ALL',
  HEADCONTENT varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '首语',
  FOOTERCONTENT varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '尾语',
  ALLOWSHOWRESULT tinyint(4) DEFAULT NULL COMMENT '是否允许成员查看投票结果,0:否,1:是',
  ALLOWANONYMAT tinyint(4) DEFAULT NULL COMMENT '是否允许成员匿名投票',
  FROMUSERID int(11) DEFAULT NULL COMMENT '创建投票的成员系统ID',
  STATUS tinyint(4) DEFAULT NULL COMMENT '状态,0:草稿,1:已发布,2:收集中,3:已结束,',
  REMARKS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '备注',
  DELMARK tinyint(4) DEFAULT NULL COMMENT '删除标记，0：存在，1：删除',
  CREATETIME timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  MODIFYTIME timestamp NULL DEFAULT NULL,
  CREATEUSERID int(11) DEFAULT NULL,
  MODIFYUSERID int(11) DEFAULT NULL,
  TO_USER varchar(17000) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '用户ID列表',
  TO_PARTY varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '部门ID列表',
  TO_TAG varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '标签ID列表',
  PIC_URL varchar(512) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '图文消息对应的图片URL',
  VOTEURL varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '投票静态URL',
  VOTECOUNT int(11) DEFAULT '0' COMMENT '用户投票次数统计',
  PRIMARY KEY (ID)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
-- 题目表
CREATE TABLE tb_d_vote_topic (
  ID int(11) NOT NULL AUTO_INCREMENT,
  VOTEID int(11) DEFAULT NULL COMMENT '投票ID',
  KINDS tinyint(4) DEFAULT NULL COMMENT '类型,来源于字典表,0:单元,1:多选',
  TITLE varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '题目',
  MAXVOTE int(11) DEFAULT NULL COMMENT '每人最多可投票数,对于单选项,该项值为1',
  MIXVOTE int(11) DEFAULT NULL COMMENT '每人最少可投票数,对于单选项,该项值为1',
  ALLOWUSERDEFINE tinyint(4) DEFAULT NULL COMMENT '是否允许用户自定义答案,0:是,1:否',
  SORTCODE int(11) DEFAULT NULL COMMENT '排序,正序',
  REMARKS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  DELMARK tinyint(4) DEFAULT NULL COMMENT '删除标记，0：存在，1：删除',
  CREATETIME timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  MODIFYTIME timestamp NULL DEFAULT NULL,
  CREATEUSERID int(11) DEFAULT NULL,
  MODIFYUSERID int(11) DEFAULT NULL,
  OPTIONCOUNT int(11) DEFAULT NULL COMMENT '选项个数',
  PRIMARY KEY (ID)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
-- 投票选项表
CREATE TABLE tb_d_vote_topic_options (
  ID int(11) NOT NULL AUTO_INCREMENT,
  VOTEID int(11) DEFAULT NULL COMMENT '投票ID',
  TOPICID int(11) DEFAULT NULL COMMENT '投票题目ID',
  KINDS int(11) DEFAULT NULL COMMENT '选项类型,冗余字段',
  OPTIONS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '选项',
  OPTIONSIMG varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '选项图示',
  OPTIONHTML text COLLATE utf8_unicode_ci COMMENT '选项的页面HTML代码[保留]',
  SORTCODE int(11) DEFAULT NULL COMMENT '排序,正序',
  DELMARK tinyint(4) DEFAULT NULL COMMENT '删除标记，0：存在，1：删除',
  CREATETIME timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  MODIFYTIME timestamp NULL DEFAULT NULL,
  CREATEUSERID int(11) DEFAULT NULL,
  MODIFYUSERID int(11) DEFAULT NULL,
  REMARKS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (ID)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
-- 投票选项扩展表
CREATE TABLE tb_d_vote_topic_ext_options (
  ID int(11) NOT NULL AUTO_INCREMENT,
  VOTEID int(11) DEFAULT NULL COMMENT '投票ID',
  TOPICID int(11) DEFAULT NULL COMMENT '投票题目ID',
  KINDS int(11) DEFAULT NULL COMMENT '选项类型,冗余字段',
  OPTIONS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '选项',
  OPTIONSIMG varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '选项图示',
  OPTIONHTML text COLLATE utf8_unicode_ci COMMENT '选项的页面HTML代码[保留]',
  SORTCODE int(11) DEFAULT NULL COMMENT '排序,正序',
  DELMARK tinyint(4) DEFAULT NULL COMMENT '删除标记，0：存在，1：删除',
  CREATETIME timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  MODIFYTIME timestamp NULL DEFAULT NULL,
  CREATEUSERID int(11) DEFAULT NULL,
  MODIFYUSERID int(11) DEFAULT NULL,
  REMARKS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
-- 投票结果表
CREATE TABLE tb_d_vote_result (
  ID int(11) NOT NULL AUTO_INCREMENT,
  VOTEID int(11) DEFAULT NULL COMMENT '投票ID',
  TOPICID int(11) DEFAULT NULL COMMENT '话题ID',
  OPTIONID int(11) DEFAULT NULL COMMENT '项ID',
  OPTIONEXTID int(11) DEFAULT NULL COMMENT '用户自定义项ID',
  ALLOWANONYMITY tinyint(4) DEFAULT NULL COMMENT '是否匿名投票,0:否,1:是',
  VOTEUSERID int(11) DEFAULT NULL COMMENT '投票人ID',
  REMARKS varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL,
  DELMARK tinyint(4) DEFAULT NULL COMMENT '删除标记，0：存在，1：删除',
  CREATETIME timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  MODIFYTIME timestamp NULL DEFAULT NULL,
  CREATEUSERID int(11) DEFAULT NULL,
  MODIFYUSERID int(11) DEFAULT NULL,
  PRIMARY KEY (ID)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

